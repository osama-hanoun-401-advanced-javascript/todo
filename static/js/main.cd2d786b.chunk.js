(this["webpackJsonpdemo-context-api"]=this["webpackJsonpdemo-context-api"]||[]).push([[0],{104:function(e,t,n){},186:function(e,t,n){e.exports=n(337)},198:function(e,t){},200:function(e,t){},214:function(e,t){},216:function(e,t){},244:function(e,t){},246:function(e,t){},247:function(e,t){},252:function(e,t){},254:function(e,t){},261:function(e,t){},263:function(e,t){},281:function(e,t){},283:function(e,t){},295:function(e,t){},298:function(e,t){},316:function(e,t,n){},336:function(e,t,n){},337:function(e,t,n){"use strict";n.r(t);var a=n(25),r=n(26),l=n(29),c=n(28),o=n(0),u=n.n(o),s=n(48),i=n.n(s),m=n(22),d=n(34),p=n(13),f=function(e,t){var n={},a=Object(o.useState)({}),r=Object(p.a)(a,2),l=r[0],c=r[1];Object(o.useEffect)((function(){var n=localStorage.getItem(e);c(n?JSON.parse(n):t)}),[]),Object(o.useEffect)((function(){localStorage.setItem(e,JSON.stringify(l))}),[l]);return{value:l,handleChange:function(t){Object.keys(n).length||(n=JSON.parse(localStorage.getItem(e)));var a=t.target.name,r=t.target.value;n=Object(m.a)(Object(m.a)({},n),{},Object(d.a)({},a,r)),console.log("temp1>>>>>>>",n)},handleSubmit:function(t){t.preventDefault(),c(Object(m.a)({},n)),console.log("temp12>>>>>>>",n),localStorage.setItem(e,JSON.stringify(l))}}},h=u.a.createContext(),g={numberOfItems:"3",completedTasks:"true",sort:"descending"};var b=function(e){var t=f("preferences",Object(m.a)({},g)),n={value:t.value,handleChange:t.handleChange,handleSubmit:t.handleSubmit};return u.a.createElement(h.Provider,{value:n},e.children)},E=n(8),v=n(20),O=(n(104),function(e){var t=Object(o.useState)({}),n=Object(p.a)(t,2),a=n[0],r=n[1];return{handleChange:function(e){e.persist(),r((function(t){return Object(m.a)(Object(m.a)({},t),{},Object(d.a)({},e.target.name,e.target.value))}))},handleSubmit:function(t){t.preventDefault(),e(a)},values:a}});var j=function(e){var t=O(e.handleSubmit),n=t.handleChange,a=t.handleSubmit;return u.a.createElement(u.a.Fragment,null,u.a.createElement(E.a,{onSubmit:a,className:" shadow-lg bg-white rounded p-3 mb-3 mr-0"},u.a.createElement("h3",{className:"text-center mb-2"},"Add Item"),u.a.createElement(E.a.Group,null,u.a.createElement(E.a.Label,null,"To Do Item"),u.a.createElement(E.a.Control,{name:"text",placeholder:"Add To Do List Item",onChange:n})),u.a.createElement(E.a.Group,null,u.a.createElement(E.a.Label,null,"Difficulty Rating"),u.a.createElement(E.a.Control,{type:"range",className:"custom-range",variant:"dark",defaultValue:"1",min:"1",max:"5",name:"difficulty",onChange:n})),u.a.createElement(E.a.Group,null,u.a.createElement(E.a.Label,null,"Assigned To"),u.a.createElement(E.a.Control,{type:"text",name:"assignee",placeholder:"Assigned To",onChange:n})),u.a.createElement(v.a,{type:"submit",variant:"secondary"},"Add Item")))},C=n(35),y=n(30),x=n(41),S=n(16),k=n(102),N=n(14),A=n.n(N),w=n(37),T=n(176),I=n.n(T),D=n(177),L=n.n(D),_=n(98),F=n.n(_),P=u.a.createContext(),q="https://api-js401.herokuapp.com",G=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).isValidAction=function(e){console.log(" this.state.user.capabilities",r.state.user.capabilities,e);var t=r.state.user.capabilities;return console.log(" role.includes(action)",t.includes(e)),console.log(" role",t),t.includes(e)},r.login=function(){var e=Object(w.a)(A.a.mark((function e(t,n){var a,l,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=I.a.encode("".concat(t,":").concat(n)),e.next=4,fetch("".concat(q,"/signin"),{method:"post",mode:"cors",cache:"no-cache",headers:{Authorization:"Basic ".concat(a)}});case 4:return l=e.sent,e.next=7,l.json();case 7:c=e.sent,console.log("res: ",c),r.validateToken(c.token),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("error : ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),r.signup=function(){var e=Object(w.a)(A.a.mark((function e(t,n,a){var l,c,o,u,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(l=new Headers).append("Content-Type","application/json"),c=JSON.stringify({username:t,password:n,role:a}),o={method:"POST",headers:l,body:c,redirect:"follow"},e.next=7,fetch("".concat(q,"/signup"),o);case 7:return u=e.sent,e.next=10,u.json();case 10:s=e.sent,console.log("res: ",s),r.validateToken(s.token),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),alert("error : ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,a){return e.apply(this,arguments)}}(),r.validateToken=function(e){var t=L.a.decode(e);t&&r.setAuthState(!0,e,t)},r.setAuthState=function(e,t,n){console.log("here "),F.a.save("auth",t),r.setState({loggedIn:e,user:n})},r.logout=function(){r.setAuthState(!1,null,{})},r.state={loggedIn:!1,login:r.login,logout:r.logout,signup:r.signup,user:{},isValidAction:r.isValidAction},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=F.a.load("auth")||null;this.validateToken(e)}},{key:"render",value:function(){return u.a.createElement(P.Provider,{value:this.state},this.props.children)}}]),n}(u.a.Component),J=function(e){return e.condition?e.children:null},B=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=!1;try{e=this.context.loggedIn&&this.context.isValidAction(this.props.action)}catch(t){console.log(t)}return u.a.createElement(J,{condition:e},this.props.children)}}]),n}(u.a.Component);B.contextType=P;var V=B;var M=function(e){var t=Object(o.useState)(Object(C.a)(e.listArr.listArr)),n=Object(p.a)(t,2),a=n[0],r=n[1];return console.log("TodoItems",e.listArr.listArr),Object(o.useEffect)((function(){}),[]),Object(o.useEffect)((function(){r(Object(C.a)(e.listArr.listArr))}),[e]),u.a.createElement(u.a.Fragment,null,u.a.createElement(k.a,null,a.map((function(t){return u.a.createElement(k.a.Item,{className:"mb-3 ",variant:"",key:t._id},u.a.createElement(x.a,null,u.a.createElement(y.a,null,u.a.createElement(S.a,{xs:1},u.a.createElement(v.a,{size:"sm",pill:"true",variant:t.complete?"danger":"success"},"     ",t.complete?u.a.createElement("span",null," complete"):u.a.createElement("span",null,"Pending"),u.a.createElement(V,{action:"update"},u.a.createElement("span",{onClick:function(){return e.handlers.handleComplete(t._id)}},"\ud83d\udd89")))),u.a.createElement(S.a,{xs:{span:1,offset:10}},u.a.createElement(V,{action:"delete"},u.a.createElement(v.a,{size:"sm",onClick:function(){return e.handlers.handleDelete(t._id)}},u.a.createElement("span",null," X "))))),u.a.createElement("hr",null),u.a.createElement(y.a,{className:"pb-1 pt-1"},u.a.createElement(S.a,null,u.a.createElement("span",null,t.text))),u.a.createElement("hr",null),u.a.createElement(y.a,null,u.a.createElement(S.a,{xs:{span:4,offset:10}},u.a.createElement("span",null,"Difficulty: ",t.difficulty)))))}))))};var U=function(e){var t=Object(o.useContext)(h),n=Object(o.useState)({numberOfPagesArr:[],listArr:[]}),a=Object(p.a)(n,2),r=a[0],l=a[1],c=Object(o.useState)({listArr:[]}),s=Object(p.a)(c,2),i=s[0],d=s[1];function f(e){for(var n=[],a=0;a<document.getElementsByClassName("itemsListGroup").length;a++)document.getElementsByClassName("itemsListGroup")[a].innerHTML="";for(var l=0,c=(e.target.value-1)*Number(t.value.numberOfItems);r.listArr.length-c&&l<Number(t.value.numberOfItems);c++,l++)n[l]=r.listArr[c];console.log("limitedListArr>>>>>>>.",n),d({listArr:n})}return Object(o.useEffect)((function(){return function(){console.log("******************* UNMOUNTED")}}),[]),Object(o.useEffect)((function(){var n=Object(m.a)({},t.value),a=Object(C.a)(e.list);"false"===n.completedTasks&&(a=Object(C.a)(a.filter((function(e){return!e.complete})))),a.sort((function(e,t){return t.difficulty-e.difficulty})),"descending"!==n.sort&&a.reverse();for(var r=Math.ceil(a.length/Number(n.numberOfItems)),c=[],o=0;o<r;o++)c[o]=o;l({numberOfPagesArr:c,listArr:a});for(var u=[],s=0;s<a.length&&s<Number(n.numberOfItems);s++)u[s]=a[s];d({listArr:u})}),[e.list,t]),u.a.createElement(u.a.Fragment,null,u.a.createElement(M,{listArr:i,handlers:{handleComplete:e.handleComplete,handleDelete:e.handleDelete}}),u.a.createElement(x.a,null,u.a.createElement(y.a,null,r.numberOfPagesArr.map((function(e,t){return u.a.createElement(v.a,{onClick:f,className:"m-2",value:t+1,key:t+1}," ",t+1)})))))},z=n(181),H=n(182),R=(n(316),n(57)),X=n.n(R),W=function(e){var t=Object(o.useState)([]),n=Object(p.a)(t,2),a=n[0],r=n[1],l=Object(o.useState)(!1),c=Object(p.a)(l,2),u=c[0],s=c[1],i=function(){var t=Object(w.a)(A.a.mark((function t(n){var l;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l={method:"post",url:e,mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},data:n},s(!u),t.next=4,X()(l).then((function(e){s((function(){return u})),console.log("respnse>>>>>",e),r([].concat(Object(C.a)(a),[e.data]))})).catch((function(e){console.log("POST AXIOS >>>>",e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(w.a)(A.a.mark((function t(n){var l,c,o;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(l=a.filter((function(e){return e._id===n}))[0]||{})._id){t.next=9;break}return c="".concat(e,"/").concat(n),l.complete=!l.complete,o={method:"put",url:c,mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},data:l},s(!u),console.log("agter read reade ",u),t.next=9,X()(o).then((function(e){s((function(){return u})),console.log("list after update >>>>>>>",e.data),r(a.map((function(t){return t._id===l._id?e.data:t})))})).catch(console.error);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(w.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!u),t.next=3,X.a.get(e).then((function(e){s((function(){return u})),r(e.data.results)})).catch(console.error);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(w.a)(A.a.mark((function t(n){var l,c;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(l=a.filter((function(e){return e._id===n}))[0]||{})._id){t.next=6;break}return c="".concat(e,"/").concat(n),s(!u),t.next=6,X.a.delete(c).then((function(e){s((function(){return u})),r(a.filter((function(e){return e._id!==l._id})))})).catch(console.error);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){d()}),[]),[a,u,i,m,f,d]},Y=function(){var e=W("https://api-js401.herokuapp.com/api/v1/todo"),t=Object(p.a)(e,5),n=t[0],a=t[1],r=t[2],l=t[3],c=t[4];return u.a.createElement(u.a.Fragment,null,u.a.createElement(x.a,null,u.a.createElement(y.a,null,u.a.createElement(S.a,null))),u.a.createElement("section",{className:"todo"},u.a.createElement(x.a,{className:"board-color"},u.a.createElement(y.a,{className:" p-3 mb-3 bg-dark text-white "},u.a.createElement(S.a,{xs:10},u.a.createElement("h2",null,"There are  ",u.a.createElement(z.a,{pill:!0,variant:n.filter((function(e){return!e.complete})).length?"success":"danger"}," ",n.filter((function(e){return!e.complete})).length," ")," Items To Complete")),a?u.a.createElement(S.a,null,u.a.createElement(H.a,{animation:"border",role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading..."))):null),u.a.createElement(y.a,{className:"pl-3 pr-3"},u.a.createElement(S.a,{md:4,className:"p-sm-0"},u.a.createElement(V,{action:"create"},u.a.createElement(j,{handleSubmit:r}))),u.a.createElement(S.a,{md:8,className:"justify-content-center p-sm-0 pl-md-5"},u.a.createElement(U,{list:n,handleComplete:l,handleDelete:c}))))))};var K=function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement(V,{action:"read"},u.a.createElement(Y,null)))},Q=n(49),Z=n(10),$=n(101),ee=function(e){return u.a.createElement("header",null,u.a.createElement($.a,{bg:"dark",variant:"dark"},u.a.createElement($.a.Brand,{className:"mr-auto"},u.a.createElement(Q.b,{to:"/todo",activeClassName:"list-class"},"TODO")),u.a.createElement(Q.b,{to:"/todo",activeClassName:"list-class"},u.a.createElement(v.a,null,"Home")),u.a.createElement(Q.b,{to:"/settings",activeClassName:"list-class"},u.a.createElement(v.a,null,"Settings"))))};var te=function(){var e=Object(o.useContext)(h);return console.log("settingsContext>>>>>>>>",e.value),u.a.createElement(u.a.Fragment,null,u.a.createElement(x.a,null,u.a.createElement(E.a,{onSubmit:e.handleSubmit,className:" shadow-lg bg-white rounded p-3 mb-3 mr-0"},u.a.createElement("h3",{className:"text-center mb-2"},"Set Your Preferences"),u.a.createElement(E.a.Group,null,u.a.createElement(E.a.Label,null,"Number of items to display per screen"),u.a.createElement(E.a.Control,{type:"number",name:"numberOfItems",defaultValue:e.value.numberOfItems,placeholder:"Number of items to display per screen",required:!0,onChange:e.handleChange})),u.a.createElement(E.a.Group,null,u.a.createElement(E.a.Label,null,"Show Completed Tasks:"),u.a.createElement(E.a.Check,{onChange:e.handleChange,type:"radio",name:"completedTasks",label:"True",value:"true",defaultChecked:"true"===e.value.completedTasks,key:"1",required:!0}),u.a.createElement(E.a.Check,{type:"radio",name:"completedTasks",label:"False",defaultChecked:"false"===e.value.completedTasks,value:"false",key:"2",required:!0,onChange:e.handleChange})),u.a.createElement(E.a.Group,null,u.a.createElement(E.a.Label,null,"Sort By Difficulty:"),u.a.createElement(E.a.Control,{as:"select",name:"sort",placeholder:"Number of items to display per screen",required:!0,onChange:e.handleChange},u.a.createElement("option",{value:"descending",selected:"descending"===e.value.sort},"Descending Order"),u.a.createElement("option",{value:"ascending",selected:"ascending"===e.value.sort},"Ascending  Order"))),u.a.createElement(v.a,{type:"submit",variant:"secondary"},"Save"))))},ne=function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement(te,null))},ae=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(d.a)({},e.target.name,e.target.value))},r.handleSigningSubmit=function(e){e.preventDefault(),console.log(r.state),console.log("in handleSubmit"),r.context.login(r.state.username,r.state.password)},r.handleSignupSubmit=function(e){e.preventDefault(),console.log(r.state),console.log("in handleSubmit"),r.context.signup(r.state.username,r.state.password,r.state.role)},r._handleLogout=function(e){r.context.logout()},r.state={username:"",password:"",role:""},r}return Object(r.a)(n,[{key:"render",value:function(){return console.log("this.context.loggedIn >> ",this.context.loggedIn),u.a.createElement(u.a.Fragment,null,u.a.createElement(J,{condition:this.context.loggedIn},u.a.createElement("button",{onClick:this._handleLogout},"Logout")),u.a.createElement(J,{condition:!this.context.loggedIn},u.a.createElement("form",{onSubmit:this.handleSigningSubmit},u.a.createElement("input",{onChange:this.handleChange,required:!0,placeholder:"username",name:"username"}),u.a.createElement("input",{onChange:this.handleChange,required:!0,placeholder:"password",name:"password"}),u.a.createElement("button",null,"Login"))),u.a.createElement(J,{condition:!this.context.loggedIn},u.a.createElement("form",{onSubmit:this.handleSignupSubmit},u.a.createElement("label",null," ",u.a.createElement("span",null," Username "),u.a.createElement("input",{onChange:this.handleChange,required:!0,placeholder:"username",name:"username"})),u.a.createElement("label",null," ",u.a.createElement("span",null," Password "),u.a.createElement("input",{onChange:this.handleChange,required:!0,placeholder:"password",name:"password"})),u.a.createElement("label",null," ",u.a.createElement("span",null," Role "),u.a.createElement("select",{onChange:this.handleChange,name:"role"},u.a.createElement("option",{value:"admin"},"Admin"),u.a.createElement("option",{value:"editor"},"Editor"),u.a.createElement("option",{value:"writer"},"Writer"),u.a.createElement("option",{value:"user"},"User"))),u.a.createElement("button",null," sign-up"))))}}]),n}(u.a.Component);ae.contextType=P;var re=ae,le=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(Q.a,null,u.a.createElement(G,null,u.a.createElement(ee,null),u.a.createElement(re,null),u.a.createElement(Z.c,null,u.a.createElement(Z.a,{exact:!0,path:"/todo"},u.a.createElement(K,null)),u.a.createElement(Z.a,{exact:!0,path:"/settings"},u.a.createElement(V,{action:"read"},u.a.createElement(ne,null)))))))}}]),n}(u.a.Component),ce=(n(335),n(336),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return u.a.createElement(b,null,u.a.createElement(le,null))}}]),n}(u.a.Component)),oe=document.getElementById("root");i.a.render(u.a.createElement(ce,null),oe)}},[[186,1,2]]]);
//# sourceMappingURL=main.cd2d786b.chunk.js.map